version: "3.1"

rules:
- rule: Activate form
  steps:
  - intent: item_start_generic
  - action: pizza_order_form
  - active_loop: pizza_order_form

#- rule: Activate form again
#  steps:
#  - intent: extra_order_positive
#  - action: pizza_order_form
#  - active_loop: pizza_order_form

- rule: submit form
  condition:
    - active_loop: pizza_order_form
  steps:
      - action: pizza_order_form      # run the form
      - active_loop: null
      - action: utter_pizza_confirm

#- rule: move on after pizza form
#  steps:
#      - intent: affirm_correct_order
#      - action: action_pizza_order_add
#      - action: action_reset_pizza_form
#      - action: utter_extra_order

- rule: out-of-scope
  steps:
  - intent: out_of_scope
  - action: utter_out_of_scope

#- rule: start
#  steps:
#    - intent: init_request
#    - action: utter_init_request

- rule: where are you?
  steps:
    - intent: request_restaurant_location
    - action: action_get_restaurant_location
    - action: utter_inform_restaurant_location
    - action: utter_anything_else

- rule: what meat pizzas do you have?
  steps:
    - intent: request_meat_pizzas
    - action: action_get_meat_pizzas
    - action: utter_inform_meat_pizzas

- rule: what vegetarian pizzas do you have?
  steps:
    - intent: request_vege_pizzas
    - action: action_get_vege_pizzas
    - action: utter_inform_vege_pizzas

- rule: what pizzas do you have?
  steps:
    - intent: request_all_pizzas
    - action: action_get_all_pizzas
    - action: utter_inform_all_pizzas

- rule: explain amount
  condition:
    - slot_was_set:
      - requested_slot: pizza_amount
  steps: 
    - intent: explain
    - action: utter_explain_pizza_quantities

- rule: explain sizes
  condition:
    - slot_was_set:
      - requested_slot: pizza_size
  steps: 
    - intent: explain
    - action: utter_explain_pizza_sizes

- rule: explain crust
  condition:
    - slot_was_set:
      - requested_slot: pizza_crust
  steps: 
    - intent: explain
    - action: utter_explain_pizza_crust
